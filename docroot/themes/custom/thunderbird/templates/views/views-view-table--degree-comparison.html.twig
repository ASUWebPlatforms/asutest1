{#
/**
 * @file
 * Template for a views table.
 */
#}

{% set classes = [
    'cols-' ~ header|length,
    responsive ? 'responsive-enabled',
    sticky ? 'sticky-enabled',
    'table',
    'table-bordered',
  ]
%}
{% set extra_fields = ['field_degree_description', 'field_admission_requirements', 'field_scholarships'] %}
<div class="table-responsive container">
  <div class="container">
    <table{{ attributes.addClass(classes) }}>
      {% if caption_needed %}
        <caption>
          {% if caption %}
            {{ caption }}
          {% else %}
            {{ title }}
          {% endif %}
          {% if (summary is not empty) or (description is not empty) %}
            <details>
              {% if summary is not empty %}
                <summary>{{ summary }}</summary>
              {% endif %}
              {% if description is not empty %}
                {{ description }}
              {% endif %}
            </details>
          {% endif %}
        </caption>
      {% endif %}
      {% if header %}
        <thead class="bg-light">
          <tr>
            {% for key, column in header %}
              {% if column.default_classes %}
                {% set column_classes = [
                  'views-field',
                  'views-field-' ~ fields[key],
                ] %}
              {% endif %}
              {% if key not in extra_fields %}
            <th{{ column.attributes.addClass(column_classes).setAttribute('scope', 'col') }}>
              {%- if column.wrapper_element -%}
                <{{ column.wrapper_element }}>
                {%- if column.url -%}
                  <a href="{{ column.url }}"
                    title="{{ column.title }}">{{ column.content }}{{ column.sort_indicator }}</a>
                {%- else -%}
                  {{ column.content }}{{ column.sort_indicator }}
                {%- endif -%}
                </{{ column.wrapper_element }}>
              {%- else -%}
                {%- if column.url -%}
                  <a href="{{ column.url }}"
                    title="{{ column.title }}">{{ column.content }}{{ column.sort_indicator }}</a>
                {%- else -%}
                  {{- column.content }}{{ column.sort_indicator }}
                {%- endif -%}
              {%- endif -%}
            </th>
              {% endif %}
            {% endfor %}
          </tr>
        </thead>
      {% endif %}
      <tbody>
      {% for row in rows %}
        <tr{{ row.attributes }}>
          {% for key, column in row.columns %}
            {% if column.default_classes %}
              {% set column_classes = [
                'views-field'
              ] %}
              {% for field in column.fields %}
                {% set column_classes = column_classes|merge(['views-field-' ~ field]) %}
              {% endfor %}
            {% endif %}
            {% if key not in extra_fields %}
            <td{{ column.attributes.addClass(column_classes) }}>
              <div>
                {%- if column.wrapper_element -%}
                  <{{ column.wrapper_element }}>
                  {% for content in column.content %}
                    {{ content.separator }}{{ content.field_output }}
                  {% endfor %}
                  </{{ column.wrapper_element }}>
                {%- else -%}
                  {% for content in column.content %}
                    {{- content.separator }}{{ content.field_output -}}
                  {% endfor %}
                {%- endif %}
                </div>
            </td>
            {% endif %}
          {% endfor %}
        </tr>
        <tr class="more-details">
          <td colspan="1"></td>
          <td colspan="3">
            <div>
              {% if row.columns.field_degree_description.content|render|striptags|trim is not empty %}
                <h3 class="h4">{{ 'Description'|t }}</h3>
                {% for content in row.columns.field_degree_description.content %}
                  {{- content.separator }}{{ content.field_output -}}
                {% endfor %}
              {% endif %}
            </div>
          </td>
          <td colspan="3">
            <div>
              {% if row.columns.field_admission_requirements.content|render|striptags|trim is not empty %}
                <h3 class="h4">{{ 'Admission requirements'|t }}</h3>
                {% for content in row.columns.field_admission_requirements.content %}
                  {{- content.separator }}{{ content.field_output -}}
                {% endfor %}
              {% endif %}
            </div>
          </td>
          <td colspan="3">
            <div>
              {% if row.columns.field_scholarships.content|render|striptags|trim is not empty %}
                <h3 class="h4">{{ 'Scholarships'|t }}</h3>
                {% for content in row.columns.field_scholarships.content %}
                  {{- content.separator }}{{ content.field_output -}}
                {% endfor %}
              {% endif %}
            </div>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
